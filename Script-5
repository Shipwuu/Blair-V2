
local FillColor = Color3.fromRGB(175, 25, 255)
local DepthMode = "AlwaysOnTop"
local FillTransparency = 0.5
local OutlineColor = Color3.fromRGB(255, 255, 255)
local OutlineTransparency = 0.7

local CoreGui = game:FindService("CoreGui")
local Storage = Instance.new("Folder")
Storage.Parent = CoreGui
Storage.Name = "Ghost_Highlight_Storage"

local function HighlightGhost()
    -- Check if the ghost exists in the workspace
    local ghost = workspace:FindFirstChild("Ghost")
    if ghost then
        -- Iterate through all the ghost parts
        for _, part in ipairs(ghost:GetChildren()) do
            if part:IsA("BasePart") then
                -- Create a highlight for the ghost part
                local highlight = Instance.new("Highlight")
                highlight.Name = "GhostHighlight_" .. part.Name
                highlight.FillColor = FillColor
                highlight.DepthMode = DepthMode
                highlight.FillTransparency = FillTransparency
                highlight.OutlineColor = OutlineColor
                highlight.OutlineTransparency = OutlineTransparency
                highlight.Adornee = part
                highlight.Parent = Storage
            end
        end
    end
end

-- Function to clear highlights when the ghost is no longer detected
local function ClearGhostHighlight()
    for _, highlight in ipairs(Storage:GetChildren()) do
        if highlight:IsA("Highlight") then
            highlight:Destroy()
        end
    end
end

-- Continuously check for the ghost and apply ESP
while true do
    -- Clear previous highlights to prevent duplicates
    ClearGhostHighlight()
    
    -- Highlight the ghost if it exists
    HighlightGhost()
    
    -- Wait for a short interval before checking again
    wait(1)
end

-- End










-- Automatically create ESP for "HumanoidRootPart" parts
local espTransparency = 0.8 -- Change this for transparency level (0 = fully opaque, 1 = fully transparent)

-- Function to create ESP adornment
function createEsp(part)
    -- Check if the part is a "HumanoidRootPart" and NOT under "workspace.Ghost"
    if part:IsA("BasePart") and part.Name == "HumanoidRootPart" then
        local parentModel = part:FindFirstAncestorOfClass("Model")
        
        -- Ensure that the HumanoidRootPart is NOT under "workspace.Ghost"
        if not (parentModel and parentModel.Name == "Ghost" and parentModel.Parent == workspace) then
            -- Create ESP for eligible HumanoidRootPart
            local espBox = Instance.new("BoxHandleAdornment")
            espBox.Name = part.Name .. "_ESP"
            espBox.Parent = part
            espBox.Adornee = part
            espBox.AlwaysOnTop = true
            espBox.ZIndex = 0
            espBox.Size = part.Size
            espBox.Transparency = espTransparency
            espBox.Color = BrickColor.new("Lime green")
        end
    end
end

-- Loop through existing parts to add ESP on execution
for _, part in pairs(workspace:GetDescendants()) do
    createEsp(part)
end

-- Connect to new parts being added to the workspace
workspace.DescendantAdded:Connect(function(part)
    createEsp(part)
end)

-- End
