-- Create a new ScreenGui
local ScreenGui = Instance.new("ScreenGui")
ScreenGui.Name = "NewScreenGui"
ScreenGui.Parent = game.Players.LocalPlayer:WaitForChild("PlayerGui")

-- Create Ghost Bar Frame
local GhostBarFrame = Instance.new("Frame")
GhostBarFrame.Name = "Ghost Bar Frame"
GhostBarFrame.BackgroundTransparency = 0
GhostBarFrame.BackgroundColor3 = Color3.fromRGB(20, 41, 51)
GhostBarFrame.Position = UDim2.new(0.25, 0, 0, 0)
GhostBarFrame.Size = UDim2.new(0.5, 0, 0, 30)
local UICorner = Instance.new("UICorner", GhostBarFrame)
UICorner.CornerRadius = UDim.new(0.8, 0)
GhostBarFrame.Parent = ScreenGui

-- Create Ghost Time Bar Frame (child of Ghost Bar Frame)
local GhostTimeBar = Instance.new("Frame")
GhostTimeBar.Name = "Ghost Time Bar"
GhostTimeBar.BackgroundTransparency = 0
GhostTimeBar.BackgroundColor3 = Color3.fromRGB(75, 75, 75)
GhostTimeBar.Position = UDim2.new(0, 5, 0, 5)
GhostTimeBar.Size = UDim2.new(0.898, -10, 0, 20)
local UICorner2 = Instance.new("UICorner", GhostTimeBar)
UICorner2.CornerRadius = UDim.new(0.8, 0)
local UIStroke = Instance.new("UIStroke", GhostTimeBar)
UIStroke.Thickness = 2
UIStroke.Color = Color3.fromRGB(105, 105, 105)
GhostTimeBar.Parent = GhostBarFrame

-- Create Ghost Detection TextLabel (child of Ghost Time Bar)
local GhostDetection = Instance.new("TextLabel")
GhostDetection.Name = "Ghost Detection"
GhostDetection.BackgroundTransparency = 1
GhostDetection.Text = "Ghost : None"
GhostDetection.Font = Enum.Font.GothamBold
GhostDetection.TextSize = 14
GhostDetection.TextColor3 = Color3.fromRGB(255, 255, 255)
GhostDetection.Position = UDim2.new(0, 0, 0, 0)
GhostDetection.Size = UDim2.new(1, 0, 1, 0)
GhostDetection.ZIndex = 2 -- Set layer of the text label to be on top
GhostDetection.Parent = GhostTimeBar

-- Create Ghost Hunt Bar (animated bar for hunt duration)
local HuntBar = Instance.new("Frame")
HuntBar.Name = "Hunt Bar Duration"
HuntBar.BackgroundTransparency = 0
HuntBar.BackgroundColor3 = Color3.fromRGB(255, 0, 0)
HuntBar.Size = UDim2.new(1, 0, 1, 0)
local UICorner3 = Instance.new("UICorner", HuntBar)
UICorner3.CornerRadius = UDim.new(0.8, 0)
HuntBar.Parent = GhostTimeBar
HuntBar.Visible = false

-- Script to detect Ghost and Hunt Duration
local function updateGhostStatus()
    local ghost = workspace:FindFirstChild("Ghost")
    if ghost then
        local hunting = ghost:FindFirstChild("Hunting")
        if hunting and hunting.Value == true then
            GhostDetection.Text = "Ghost : Hunting"
            HuntBar.Visible = true
            animateHuntDuration()
        else
            GhostDetection.Text = "Ghost : None"
            HuntBar.Visible = false
        end
    else
        GhostDetection.Text = "Ghost : None"
        HuntBar.Visible = false
    end
end

-- Function to animate Hunt Bar based on HuntDuration
local function animateHuntDuration()
    local huntDuration = game:GetService("ReplicatedStorage"):FindFirstChild("HuntDuration")
    if huntDuration then
        local duration = huntDuration.Value
        local startTime = tick()
        
        spawn(function()
            while tick() - startTime < duration do
                local timeLeft = duration - (tick() - startTime)
                HuntBar.Size = UDim2.new(timeLeft / duration, 0, 1, 0)
                wait(0.1)
            end
            HuntBar.Size = UDim2.new(0, 0, 1, 0)
        end)
    end
end

-- Connect to property changes for detecting Ghost and Hunt status
game:GetService("RunService").RenderStepped:Connect(updateGhostStatus)
