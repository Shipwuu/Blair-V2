-- Create a new ScreenGui named Ghost Bar UI
local player = game.Players.LocalPlayer
local playerGui = player:WaitForChild("PlayerGui")

local function createGhostUI()
    -- Create ScreenGui
    local ghostBarGui = Instance.new("ScreenGui")
    ghostBarGui.Name = "Ghost Bar UI"
    ghostBarGui.Parent = playerGui

    -- Create Ghost Bar Frame
    local ghostBarFrame = Instance.new("Frame")
    ghostBarFrame.Name = "Ghost Bar Frame"
    ghostBarFrame.BackgroundTransparency = 0
    ghostBarFrame.BackgroundColor3 = Color3.fromRGB(20, 41, 51)
    ghostBarFrame.Position = UDim2.new(0.25, 0, 0, 0)
    ghostBarFrame.Size = UDim2.new(0.5, 0, 0, 30)
    ghostBarFrame.Parent = ghostBarGui

    local ghostBarFrameUICorner = Instance.new("UICorner")
    ghostBarFrameUICorner.CornerRadius = UDim.new(0, 8)
    ghostBarFrameUICorner.Parent = ghostBarFrame

    -- Create Ghost Time Bar inside Ghost Bar Frame
    local ghostTimeBar = Instance.new("Frame")
    ghostTimeBar.Name = "Ghost Time Bar"
    ghostTimeBar.BackgroundTransparency = 0
    ghostTimeBar.BackgroundColor3 = Color3.fromRGB(75, 75, 75)
    ghostTimeBar.Position = UDim2.new(0, 5, 0, 5)
    ghostTimeBar.Size = UDim2.new(0.898, 38, 0, 20)
    ghostTimeBar.Parent = ghostBarFrame

    local ghostTimeBarUICorner = Instance.new("UICorner")
    ghostTimeBarUICorner.CornerRadius = UDim.new(0, 8)
    ghostTimeBarUICorner.Parent = ghostTimeBar

    local ghostTimeBarUIStroke = Instance.new("UIStroke")
    ghostTimeBarUIStroke.Thickness = 2
    ghostTimeBarUIStroke.Color = Color3.fromRGB(105, 105, 105)
    ghostTimeBarUIStroke.Parent = ghostTimeBar

    -- Create Ghost Detection TextLabel inside Ghost Bar Frame
    local ghostDetectionLabel = Instance.new("TextLabel")
    ghostDetectionLabel.Name = "Ghost Detection"
    ghostDetectionLabel.Text = "Ghost: None"
    ghostDetectionLabel.Font = Enum.Font.GothamBold
    ghostDetectionLabel.TextSize = 14
    ghostDetectionLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
    ghostDetectionLabel.BackgroundTransparency = 1
    ghostDetectionLabel.Position = UDim2.new(0, 0, -1, 0)
    ghostDetectionLabel.Size = UDim2.new(0.898, 38, 0, 20)
    ghostDetectionLabel.Parent = ghostBarFrame

    -- Create Hunt Bar Duration (initially not visible)
    local huntDurationBar = Instance.new("Frame")
    huntDurationBar.Name = "Hunt Duration Bar"
    huntDurationBar.BackgroundColor3 = Color3.fromRGB(255, 0, 0)
    huntDurationBar.Size = UDim2.new(1, 0, 1, 0)
    huntDurationBar.Visible = false
    huntDurationBar.Parent = ghostTimeBar

    local huntDurationBarUICorner = Instance.new("UICorner")
    huntDurationBarUICorner.CornerRadius = UDim.new(0, 8)
    huntDurationBarUICorner.Parent = huntDurationBar

    -- Function to handle Ghost detection and update UI
    local function updateGhostUI()
        local ghost = workspace:FindFirstChild("Ghost")
        if ghost and ghost:FindFirstChild("Hunting") then
            local isHunting = ghost.Hunting.Value
            if isHunting then
                ghostDetectionLabel.Text = "Ghost: Hunting"
                local huntDuration = game:GetService("ReplicatedStorage"):FindFirstChild("HuntDuration")
                if huntDuration then
                    local initialDuration = huntDuration.Value
                    huntDurationBar.Visible = true
                    huntDurationBar:TweenSize(UDim2.new(1, 0, 1, 0), Enum.EasingDirection.Out, Enum.EasingStyle.Quad, 0.5, true)
                    huntDurationBar.BackgroundTransparency = 1
                    huntDurationBar.Visible = true

            end
        end
    end

    -- Continuously monitor Ghost status
    game:GetService("RunService").RenderStepped:Connect(updateGhostUI)
end

-- Call the function to create the UI
createGhostUI()
